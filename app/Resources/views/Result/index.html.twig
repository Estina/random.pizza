{% extends "base.html.twig" %}

{% block title %}Random Pizza - Result{% endblock %}
{% block description %}{{ result['options'].qty }} random ({{ flavor(result['options']) }})
    pizza{% if result['options'].qty > 1 %}s{% endif %} for {{ result['restaurant'] }} located in {{ result['city'] }}.{% endblock %}

{% block scripts %}<script type="text/javascript" src="{{ asset('js/app/result.js') }}"></script>{% endblock %}

{% block controller %}result{% endblock %}

{% block content %}

    <div class="row clearfix">
        <div class="col-md-6 col-md-offset-3 column">
            <fieldset>

                <legend>Result</legend>

                <div class="col-md-12 result-board">

                    {% if result['pizzas']|length == 1 %}

                        <div class="big-text">
                            {{ result['pizzas'][0].name }}
                            {% if result['pizzas'][0]['qty'] > 1 %}x {{ result['pizzas'][0]['qty'] }}{% endif  %}
                        </div>

                    {%  else %}

                        <ol>
                            {% for pizza in result['pizzas'] %}
                                <li>
                                    {{ pizza.name }}
                                    {% if pizza.qty > 1 %}x {{ pizza.qty }}{% endif  %}
                                </li>
                            {% endfor %}
                        </ol>

                    {% endif %}
                </div>

            </fieldset>
        </div>
    </div>

    <div class="row clearfix">
        <div class="col-md-6 col-md-offset-3 column">
            <fieldset>
                <legend>Share</legend>

                {% set resultUrl = 'http://random.pizza/' ~ result['slug'] %}

                <div class="row result-share">
                    <div class="col-md-6">
                        <input id="share-url" name="share-url" value="{{ resultUrl }}" class="form-control input-md" type="text">
                    </div>
                    <div class="col-md-6">
                        <ul class="social">
                            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u={{ resultUrl }}" title="Share on Facebook"></a></li>
                            <li class="twitter"><a href="https://twitter.com/home?status={{ resultUrl }}" title="Share on Twitter"></a></li>
                            <li class="googleplus"><a href="https://plus.google.com/share?url={{ resultUrl }}" title="Share on Google +"></a></li>
                        </ul>
                    </div>
                </div>

            </fieldset>
        </div>
    </div>

    <div class="row clearfix">
        <div class="col-md-6 col-md-offset-3 column">
            <fieldset>
                <legend>Info</legend>
                <p>
                    <input type="hidden" name="date_utc" id="date-utc" value="{{ result['date_created'] }}">
                    Generated on <strong><span id="date-created"></span></strong>.
                    The request was to generate <strong>{{ result['options'].qty }}</strong> random
                    <strong>({{ flavor(result['options']) }})</strong>
                    pizza{% if result['options'].qty > 1 %}s{% endif %} for <strong>"{{ result['restaurant'] }}"</strong>
                    located in <strong>{{ result['city'] }}</strong>.
                </p>
                <p>&nbsp;</p>
                <p class="text-center enjoy"><strong>Enjoy your pizza!</strong></p>

            </fieldset>
        </div>
    </div>




{% endblock %}